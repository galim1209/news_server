<!DOCTYPE html>
<html lang="en">
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<!-- xmlns 설정을 해줘야 th 사용 가능-->
<head th:replace="~{layout :: head('Adminstractor')}">
</head>
<body th:replace="~{layout :: base (~{::section})}">
    <section >
        <div>
            <h2> <i class="bi bi-award"></i> [News Source] </h2>
            <a class="btn btn-primary mb-1" th:href="@{/admin/inputSources}" th:text="'발행처 갱신'" > 발행처 갱신 </a>
        </div>

        <div class="alert alert-danger" th:if="${error}">
            <p th:text="${error}"></p>
        </div>

        <table class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th scope="col">name</th>
                <th scope="col">description</th>
                <th scope="col">category</th>
                <th scope="col">country</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="src : ${sources}">
                <td>
                    <a th:href="${src.url}" th:text="${src.name}" target="_blank"></a>
                </td>
                <td th:text="${src.description}"></td>
                <td th:text="${src.category}"></td>
                <td th:text="${src.country}"></td>
            </tr>
            </tbody>
        </table>

        <!--  페이지제어기 (페이지네이션) -->
        <nav>
            <ul class="pagination justify-content-center my-3">
                <!-- 처음 -->
                <li class="page-item" th:classappend="${sources.first} ? 'disabled' ">
                    <a class="page-link" th:href="@{/admin/source(page=0, size=${sources.size})}">처음</a>
                </li>
                <!-- 이전 -->
                <li class="page-item" th:classappend="${sources.first} ? 'disabled' ">
                    <a class="page-link" th:href="@{/admin/source(page=${sources.number-1}, size=${sources.size})}">이전</a>
                </li>
                <!-- 페이지 번호(최대 10개) -->
                <li class="page-item"
                    th:each="i : ${#number.sequence(sources.number / 10) *10,
                                                    T(java.lang.Math).min((sources.number/10)*10+9, sources.totalPages-1)}"
                    th:classappend="${sources.number == i} ? active">
                    <a class="page-link"
                       th:href="@{/admin/source(page=${id}, size=${sources.size})}"
                    th:text="${i+1}">0</a>
                </li>
                <!-- 다음 -->
                <!-- 마지막 -->

            </ul>
        </nav>
    </section>
</body>
</html>
